# 快速修复构建问题

## 一键修复（推荐）

运行以下 PowerShell 脚本自动修复常见构建问题：

```powershell
cd src\BuildScript
.\fix-build-issues.ps1
```

## 手动修复步骤

### 1. 修复缺失的 key 文件

```batch
cd src\BuildScript
if not exist shooterclient_dummy.key echo # Dummy key > shooterclient_dummy.key
if not exist shooterapi_dummy.key echo # Dummy key > shooterapi_dummy.key

if not exist ..\Source\svplib\shooterclient.key (
    echo # Dummy key > ..\Source\svplib\shooterclient.key
)
if not exist ..\include\shooterclient.key (
    echo # Dummy key > ..\include\shooterclient.key
)
if not exist ..\include\shooterapi.key (
    echo # Dummy key > ..\include\shooterapi.key
)
```

### 2. 创建 revision.h 文件

```batch
cd src\BuildScript
if not exist ..\Source\apps\mplayerc\revision.h (
    copy revision_dummy.h ..\Source\apps\mplayerc\revision.h
)
```

### 3. 创建输出目录

```batch
cd src
if not exist out\bin mkdir out\bin
if not exist out\obj mkdir out\obj
```

### 4. 使用改进的构建脚本

```batch
cd src\BuildScript
build-fixed.cmd
```

## 常见问题

### Visual Studio 未找到

**解决方案**: 使用 `build-fixed.cmd`，它会自动检测已安装的 Visual Studio 版本。

### 依赖库缺失

如果缺少 `thirdparty/pkg` 或 `thirdparty/sinet`，可以：
1. 跳过依赖构建，直接构建主项目
2. 或从原始仓库获取这些依赖

### 工具集版本错误

编辑 `.vcxproj` 文件，将 `v120` 改为已安装的版本：
- `v142` (VS2019)
- `v143` (VS2022)

## 详细文档

查看 [BUILD-FIXES.md](docs/BUILD-FIXES.md) 获取完整的故障排除指南。
